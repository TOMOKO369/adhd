<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="情緒型発達・知育型発達のセルフチェックツール">
    <title>発達特性セルフチェック</title>
    <!-- Google Fonts: やわらかくてかわいいフォント -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;500;700&display=swap"
        rel="stylesheet">
    <style>
        /* CSS Reset & Variables */
        :root {
            --bg-color: #fffdf5;
            /* やさしいクリーム色 */
            --text-main: #5d4a44;
            /* やわらかいこげ茶色 */
            --text-muted: #9c8e88;
            --card-bg: #ffffff;
            --yes-bg: #ffb7b2;
            /* ふんわりピンク/オレンジ */
            --yes-hover: #ff9d96;
            --no-bg: #a2cffe;
            /* ふんわりブルー */
            --no-hover: #8abefa;
            --btn-text: #ffffff;
            --accent: #ff9aa2;
            --progress-bg: #f8ece8;
            --danger-bg: #ffe4e6;
            --danger-text: #bd4055;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Zen Maru Gothic', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            line-height: 1.6;
            padding: 2rem 1rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            max-width: 640px;
            width: 100%;
            margin: auto;
        }

        /* Card UI */
        .card {
            background: var(--card-bg);
            border-radius: 30px;
            padding: 3rem 2rem;
            box-shadow: 0 15px 35px rgba(210, 195, 190, 0.3);
            text-align: center;
            display: none;
            /* JSで切り替え */
            animation: fadeIn 0.5s ease;
        }

        .card.active {
            display: block;
        }

        /* Animation utilities */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Disclaimer */
        .disclaimer {
            background-color: var(--danger-bg);
            border-radius: 20px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            color: var(--danger-text);
            font-weight: 500;
            font-size: 0.95rem;
            box-shadow: inset 0 0 0 2px rgba(189, 64, 85, 0.1);
        }

        .disclaimer strong {
            display: block;
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            font-weight: 700;
        }

        /* Start Screen */
        .title {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--text-main);
            margin-bottom: 1rem;
            line-height: 1.4;
        }

        .subtitle {
            color: var(--text-muted);
            margin-bottom: 2.5rem;
            font-size: 1rem;
        }

        .start-btn {
            background-color: var(--yes-bg);
            color: var(--btn-text);
            border: none;
            padding: 1.25rem 3.5rem;
            font-size: 1.25rem;
            font-weight: 700;
            border-radius: 9999px;
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(255, 183, 178, 0.4);
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .start-btn:hover {
            background-color: var(--yes-hover);
            transform: translateY(-3px);
            box-shadow: 0 12px 25px rgba(255, 183, 178, 0.5);
        }

        /* Question Screen */
        .category-badge {
            display: inline-block;
            background-color: var(--progress-bg);
            color: var(--text-muted);
            padding: 0.5rem 1.25rem;
            border-radius: 999px;
            font-size: 0.9rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
        }

        .question-text {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--text-main);
            min-height: 5rem;
            margin-bottom: 2.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1.5;
        }

        /* Buttons */
        .btn-group {
            display: flex;
            gap: 1.5rem;
            justify-content: center;
            margin-bottom: 2rem;
        }

        @media (max-width: 480px) {
            .btn-group {
                flex-direction: column;
                gap: 1rem;
            }

            .card {
                padding: 2.5rem 1.5rem;
            }
        }

        .answer-btn {
            flex: 1;
            padding: 1.25rem 1rem;
            border: none;
            border-radius: 20px;
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--btn-text);
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: inherit;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .btn-yes {
            background-color: var(--yes-bg);
            box-shadow: 0 8px 20px rgba(255, 183, 178, 0.3);
        }

        .btn-yes:hover {
            background-color: var(--yes-hover);
            transform: translateY(-3px);
        }

        .btn-no {
            background-color: var(--no-bg);
            box-shadow: 0 8px 20px rgba(162, 207, 254, 0.3);
        }

        .btn-no:hover {
            background-color: var(--no-hover);
            transform: translateY(-3px);
        }

        .back-btn {
            background: none;
            border: none;
            color: var(--text-muted);
            font-size: 0.95rem;
            cursor: pointer;
            text-decoration: underline;
            font-family: inherit;
            padding: 0.5rem;
        }

        .back-btn:hover {
            color: var(--text-main);
        }

        /* Progress Bar */
        .progress-wrapper {
            margin-bottom: 2rem;
        }

        .progress-text {
            text-align: right;
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .progress-bar-container {
            width: 100%;
            height: 10px;
            background-color: var(--progress-bg);
            border-radius: 999px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background-color: var(--accent);
            border-radius: 999px;
            width: 0%;
            transition: width 0.4s ease;
        }

        /* Result Screen */
        .result-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            margin-top: 2rem;
        }

        @media (max-width: 480px) {
            .result-grid {
                grid-template-columns: 1fr;
            }
        }

        .result-card {
            background: #fdfaf6;
            border-radius: 20px;
            padding: 1.5rem;
            border: 2px solid var(--progress-bg);
        }

        .result-title {
            font-size: 1.1rem;
            color: var(--text-muted);
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .result-score {
            font-size: 3rem;
            font-weight: 700;
            color: var(--text-main);
            margin-bottom: 0.5rem;
        }

        .result-score span {
            font-size: 1.2rem;
            font-weight: 500;
            color: var(--text-muted);
        }

        .result-score.high {
            color: var(--danger-text);
        }

        /* Guidance Section */
        #guidance-section {
            display: none;
            margin-top: 2rem;
            background: #fffafa;
            border: 2px dashed var(--accent);
            border-radius: 20px;
            padding: 2rem 1.5rem;
            animation: fadeIn 0.8s ease;
        }

        .guidance-title {
            color: var(--danger-text);
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }

        .guidance-desc {
            font-size: 0.95rem;
            margin-bottom: 1.5rem;
        }

        .guidance-links {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .guidance-link {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1.25rem 1.5rem;
            background: white;
            border-radius: 16px;
            color: var(--text-main);
            text-decoration: none;
            font-weight: 700;
            border: 2px solid var(--progress-bg);
            transition: all 0.3s ease;
        }

        .guidance-link:hover {
            border-color: var(--accent);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 154, 162, 0.2);
        }

        .guidance-link svg {
            width: 20px;
            height: 20px;
            color: var(--accent);
        }

        .restart-btn {
            background-color: var(--progress-bg);
            color: var(--text-main);
            border: none;
            padding: 1rem 2rem;
            font-size: 1rem;
            font-weight: 700;
            border-radius: 9999px;
            cursor: pointer;
            margin-top: 2.5rem;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .restart-btn:hover {
            background-color: #f1e0d9;
        }
    </style>
</head>

<body>
    <div class="container">

        <!-- ================= スタート画面 ================= -->
        <div id="start-screen" class="card active">
            <h1 class="title">発達特性セルフチェック</h1>
            <p class="subtitle">情緒型・知育型発達の傾向をチェックします<br>（一問ずつ直感でお答えください）</p>

            <div class="disclaimer">
                <strong>【免責事項】</strong>
                本サイトは医学的診断ではありません。利用は自己責任でお願いします。運営者は一切の責任を負いません。
            </div>

            <button class="start-btn" onclick="startCheck()">スタート</button>
        </div>

        <!-- ================= 質問画面 ================= -->
        <div id="question-screen" class="card">
            <div class="progress-wrapper">
                <div class="progress-text">
                    <span id="current-count">1</span> / <span id="total-count">100</span>
                </div>
                <div class="progress-bar-container">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
            </div>

            <div class="category-badge" id="category-badge">情緒型発達</div>

            <div class="question-text" id="question-text">
                <!-- 質問文がここに入ります -->
            </div>

            <div class="btn-group">
                <button class="answer-btn btn-yes" onclick="answer(true)">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M20 6L9 17l-5-5" />
                    </svg>
                    はい
                </button>
                <button class="answer-btn btn-no" onclick="answer(false)">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M18 6L6 18M6 6l12 12" />
                    </svg>
                    いいえ
                </button>
            </div>

            <button class="back-btn" id="back-btn" onclick="goBack()" style="display: none;">前の問題に戻る</button>
        </div>

        <!-- ================= 結果画面 ================= -->
        <div id="result-screen" class="card">
            <h2 class="title">チェック結果</h2>
            <p class="subtitle">該当する項目の割合（％）</p>

            <div class="result-grid">
                <div class="result-card">
                    <div class="result-title">情緒型発達</div>
                    <div class="result-score" id="res-emotion">0<span>%</span></div>
                </div>
                <div class="result-card">
                    <div class="result-title">知育型発達</div>
                    <div class="result-score" id="res-intellect">0<span>%</span></div>
                </div>
            </div>

            <div id="guidance-section">
                <h3 class="guidance-title">専門機関へのご案内</h3>
                <p class="guidance-desc">該当率が80%を超えました。より詳しい状況の確認やサポートのために、以下の専門機関・窓口へご相談されることをお勧めいたします。</p>
                <div class="guidance-links">
                    <a href="https://www.mhlw.go.jp/stf/seisakunitsuite/bunya/hukushi_kaigo/shougaishahukushi/hattatsu/index.html"
                        target="_blank" rel="noopener noreferrer" class="guidance-link">
                        発達障害者支援センター一覧
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <path d="M5 12h14M12 5l7 7-7 7" />
                        </svg>
                    </a>
                    <a href="https://h-navi.jp/" target="_blank" rel="noopener noreferrer" class="guidance-link">
                        LITALICO発達ナビ（病院検索）
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <path d="M5 12h14M12 5l7 7-7 7" />
                        </svg>
                    </a>
                </div>
            </div>

            <button class="restart-btn" onclick="location.reload()">もう一度チェックする</button>
        </div>

    </div>

    <script>
        // -------------------------
        // 1. 質問データ定義
        // -------------------------
        const emotionData = [
            "相手の表情から感情を読み取るのが苦手",
            "冗談や皮肉を真に受けて傷つくことが多い",
            "会話で「行間を読む」ことが難しい",
            "興味があることなら、相手が退屈していても話し続けてしまう",
            "視線を合わせることに違和感や苦痛を感じる",
            "場の空気に合わない発言をしてしまうことがある",
            "比喩表現（「雲を掴むような」など）を言葉通りに受け取ってしまう",
            "初対面の人との雑談が極端に苦手",
            "名前を呼ばれても気づかないことがよくある",
            "集団行動よりも一人でいることを好む",
            "急な予定変更があると、激しく混乱したり怒ったりする",
            "自分なりの「独自のルール」や「手順」に強くこだわる",
            "物を置く位置や順番が少しでも変わると落ち着かない",
            "特定の分野（電車、数字、ロゴ等）に驚異的な記憶力がある",
            "毎日同じルートで移動することにこだわる",
            "感情の起伏が激しく、一度怒ると収まりにくい",
            "順番待ちや列に並ぶことが非常に苦痛",
            "考えるより先に体が動いてしまう（衝動性）",
            "じっとしていられず、手足をモゾモゾ動かしてしまう",
            "忘れ物や失くし物が日常的に多い",
            "掃除や片付けの段取りが立てられず、部屋が散らかる",
            "複数のことを同時に並行して行うのが苦手（マルチタスク困難）",
            "大きな音（掃除機、人混み、花火等）が苦手",
            "特定の服の肌触り（タグ、素材）を極端に嫌がる",
            "偏食が激しく、特定の食感のものしか食べられない",
            "眩しい光に対して、他の人より敏感に反応する",
            "自分の体をどこかにぶつけやすく、距離感が掴みづらい",
            "痛みに非常に強い、あるいは逆に非常に弱い",
            "人の話し声が背景の雑音に紛れて聞こえづらい",
            "自分の感情を言葉で説明するのが難しい",
            "手先が不器用で、紐結びやボタン留めが苦手",
            "表情が乏しい、あるいは「顔が怖い」と言われることがある",
            "独り言が多い、または人の言葉をオウム返しする",
            "予定がない日があると、何をすればいいか分からず不安になる",
            "集団の中で浮いていると感じることが多い",
            "勝ち負けに異常にこだわり、負けるとひどく落ち込む",
            "他人の持ち物を勝手に触ってしまうことがある",
            "正義感が強すぎて、他人の小さなミスを許せず指摘してしまう",
            "変化を嫌い、新しい環境に馴染むのに時間がかかる",
            "決まったフレーズを繰り返し使う癖がある",
            "自分が関心のない話には全く耳を貸さない",
            "お金の管理が苦手で、衝動買いをしてしまう",
            "締切間際にならないと作業に手がつかない",
            "相手との物理的な距離感が近すぎると言われる",
            "自分が他人からどう見られているか想像しにくい",
            "運動会や発表会などのイベントが苦痛だった",
            "名前を覚えるのが極端に苦手",
            "睡眠リズムが崩れやすく、朝起きるのが辛い",
            "指示を最後まで聞かずに動いて失敗する",
            "集中しすぎると周りの音が全く聞こえなくなる（過集中）"
        ];

        const intellectData = [
            "文章を読んでいるとき、同じ行を何度も読み返してしまう",
            "漢字の形が覚えられず、線が多かったり少なかったりする",
            "「ぬ」と「め」、「わ」と「ね」など似た文字を書き間違える",
            "文字の大きさがバラバラになり、マス目からはみ出す",
            "音読をすると、たどたどしくなる（拾い読み）",
            "鏡文字（左右反転した文字）を書いてしまう",
            "促音（「っ」）や拗音（「ゃ、ゅ、ょ」）の書き漏らしが多い",
            "文章を読んでも、その内容を要約することができない",
            "簡単な暗算に時間がかかる、または指を使わないとできない",
            "桁数の多い数字を書き写すときにミスをする",
            "繰り上がり、繰り下がりの計算で混乱する",
            "文章題の内容を式に変換することができない",
            "九九を覚えるのに、他の人より何倍も時間がかかった",
            "図形の問題（回転させた形など）が全く理解できない",
            "左右（右と左）を瞬時に判断できないことがある",
            "地図を読んで目的地にたどり着くのが難しい",
            "アナログ時計の針を見て、時刻を読み取るのが苦手",
            "「10分後」「1時間前」といった時間の計算ができない",
            "順序立てて物事を説明するのが苦手",
            "複数の指示を一度に受けると、1つ目しか覚えられない",
            "短期記憶が弱く、さっき聞いたことをすぐ忘れる",
            "物の名前がすぐに出てこず「あれ」「それ」を多用する",
            "物語の時系列（昔・今）を整理するのが苦手",
            "上下左右、前後などの位置関係を把握しにくい",
            "道具（ハサミ、定規、コンパス）を器用に使えない",
            "球技でボールをキャッチするのが苦手（空間把握の弱さ）",
            "ダンスや体操などの複雑な動きを真似できない",
            "文脈から不明な言葉の意味を推測するのが難しい",
            "表やグラフから情報を読み取ることが苦手",
            "主語と述語がバラバラな文章を書いてしまう",
            "ノートの使い方が不自然で、書き方が整理されていない",
            "筆圧が極端に強い、あるいは弱すぎて字が薄い",
            "記憶の抜け落ち（自分の行動の記憶など）が目立つ",
            "論理的な飛躍があり、話が支離滅裂になりやすい",
            "パズルや積み木の組み立てが苦手",
            "お釣りの計算ができず、小銭が財布に溜まってしまう",
            "物事の優先順位をつけるのが非常に苦手",
            "抽象的な概念（平和、自由など）の理解に時間がかかる",
            "比率（％）や分数の概念が直感的に分からない",
            "自分が書いた字を後で読み返すことができない",
            "カレンダーの管理ができず、約束を忘れる",
            "辞書を引く作業に時間がかかりすぎる",
            "文字を書くのが遅く、板書が間に合わない",
            "英単語のスペルが全く覚えられない",
            "物事を分類（仲間分け）するのが苦手",
            "原因と結果の関係を結びつけるのが苦手",
            "話の要点を一言でまとめることができない",
            "手順書やマニュアルを理解するのに苦労する",
            "図画工作で、完成図を想像しながら作ることができない",
            "自分の考えを紙に書き出すと、まとまらなくなる"
        ];

        // 質問の統合
        const allQuestions = [];
        emotionData.forEach(text => allQuestions.push({ category: "情緒型発達", type: "emotion", text }));
        intellectData.forEach(text => allQuestions.push({ category: "知育型発達", type: "intellect", text }));

        const totalCount = allQuestions.length;
        document.getElementById('total-count').innerText = totalCount;

        // 状態管理
        let currentIndex = 0;
        let userAnswers = []; // true(はい) または false(いいえ) を保存

        // 画面切り替え関数
        function showScreen(screenId) {
            document.querySelectorAll('.card').forEach(card => card.classList.remove('active'));
            document.getElementById(screenId).classList.add('active');
        }

        // チェック開始
        function startCheck() {
            currentIndex = 0;
            userAnswers = [];
            showScreen('question-screen');
            renderQuestion();
        }

        // 質問を画面に描画
        function renderQuestion() {
            const q = allQuestions[currentIndex];

            // プログレス＆テキスト更新
            document.getElementById('current-count').innerText = currentIndex + 1;
            document.getElementById('progress-fill').style.width = `${((currentIndex) / totalCount) * 100}%`;

            document.getElementById('category-badge').innerText = q.category;
            document.getElementById('question-text').innerText = q.text;

            // 最初だけ「戻る」ボタンを隠す
            document.getElementById('back-btn').style.display = currentIndex === 0 ? 'none' : 'inline-block';
        }

        // はい / いいえ の回答
        function answer(isYes) {
            userAnswers[currentIndex] = isYes;
            currentIndex++;

            if (currentIndex < totalCount) {
                renderQuestion();
            } else {
                // 完了したら100%にして結果画面へ
                document.getElementById('progress-fill').style.width = '100%';
                setTimeout(() => {
                    calculateResults();
                    showScreen('result-screen');
                }, 300);
            }
        }

        // １つ戻る
        function goBack() {
            if (currentIndex > 0) {
                currentIndex--;
                renderQuestion();
            }
        }

        // 結果計算＆表示
        function calculateResults() {
            let emotionTrueCount = 0;
            let intellectTrueCount = 0;

            userAnswers.forEach((ans, idx) => {
                if (ans) {
                    if (allQuestions[idx].type === 'emotion') emotionTrueCount++;
                    if (allQuestions[idx].type === 'intellect') intellectTrueCount++;
                }
            });

            // 50問中のパーセンテージ
            const emotionPercent = Math.round((emotionTrueCount / emotionData.length) * 100);
            const intellectPercent = Math.round((intellectTrueCount / intellectData.length) * 100);

            // 数字アニメーション表示
            animateValue(document.getElementById('res-emotion'), 0, emotionPercent, 1000);
            animateValue(document.getElementById('res-intellect'), 0, intellectPercent, 1000);

            // 80%以上なら赤文字にする
            setTimeout(() => {
                const elEmotion = document.getElementById('res-emotion');
                const elIntellect = document.getElementById('res-intellect');
                if (emotionPercent >= 80) elEmotion.classList.add('high');
                if (intellectPercent >= 80) elIntellect.classList.add('high');

                // 80%以上で案内を表示
                if (emotionPercent >= 80 || intellectPercent >= 80) {
                    document.getElementById('guidance-section').style.display = 'block';
                }
            }, 1000);
        }

        // 数字カウントアップのアニメーション
        function animateValue(obj, start, end, duration) {
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                const easeProgress = 1 - Math.pow(1 - progress, 4); // easeOutQuart 
                obj.innerHTML = Math.floor(easeProgress * (end - start) + start) + '<span>%</span>';
                if (progress < 1) {
                    window.requestAnimationFrame(step);
                } else {
                    obj.innerHTML = end + '<span>%</span>';
                }
            };
            window.requestAnimationFrame(step);
        }

    </script>
</body>

</html>